exports.ids=[4],exports.modules={250:function(t,e,o){"use strict";o.r(e);var r={name:"addIpsModal",props:["show"],data:()=>({ipString:""}),computed:{user(){return this.$store.getters["auth/user"]}},methods:{async add(){let{user:t,ipString:e}=this,o=e.split("\n");const{success:r}=(await this.$axios.post("/ip/add",{user:t,lines:o})).data;r?(this.$notify.success({title:"Адреса добавлены"}),this.$emit("reload"),this.$emit("close"),this.ipString=""):this.$notify.error({title:"Ошибка при добавлении"})},addStandart(){this.ipString=this.ipString.split("\n").map(t=>t+":65233:moiplansh028:H3o1SkD").join("\n")}}},n=o(0);var d=Object(n.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("mdb-modal",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}]},[o("mdb-modal-header",[t._v("\n    Добавить IP адреса\n  ")]),t._v(" "),o("mdb-modal-body",[o("mdb-input",{attrs:{type:"textarea",label:"Строка для ip"},model:{value:t.ipString,callback:function(e){t.ipString=e},expression:"ipString"}}),t._v(" "),o("a",{attrs:{href:"#"},on:{click:t.addStandart}},[t._v("Добавить стандартную приписку")])],1),t._v(" "),o("mdb-modal-footer",[o("mdb-btn",{attrs:{color:"success"},on:{click:t.add}},[t._v("Добавить")]),t._v(" "),o("mdb-btn",{attrs:{color:"danger"},on:{click:function(e){return t.$emit("close")}}},[t._v("Закрыть")])],1)],1)}),[],!1,(function(t){}),"64452f3e","78c647ee").exports,c={name:"addUserAgentModal",props:["show","row"],data:()=>({userAgent:""}),computed:{user(){return this.$store.getters["auth/user"]}},mounted(){this.row.userAgent&&(this.userAgent=this.row.userAgent)},watch:{row(){this.userAgent=this.row.userAgent}},methods:{async add(){const{success:t}=(await this.$axios.post("/ip/setUserAgent",{user:this.user,_id:this.row._id,userAgent:this.userAgent})).data;t?(this.$notify.success({title:"UserAgent обновлен"}),this.$emit("reload"),this.$emit("close"),this.ipString=""):this.$notify.error({title:"Ошибка"})}}};var l=Object(n.a)(c,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("mdb-modal",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],on:{close:function(e){return t.$emit("close")}}},[o("mdb-modal-header",[t._v("\n    Добавить UserAgent\n  ")]),t._v(" "),o("mdb-modal-body",[o("mdb-input",{attrs:{type:"textarea",label:"userAgent"},model:{value:t.userAgent,callback:function(e){t.userAgent=e},expression:"userAgent"}})],1),t._v(" "),o("mdb-modal-footer",[o("mdb-btn",{attrs:{color:"success"},on:{click:t.add}},[t._v("Добавить")])],1)],1)}),[],!1,(function(t){}),"fd4d1700","90207c0a").exports,h={name:"checkUserAgentModal",props:["show"],computed:{user(){return this.$store.getters["auth/user"]}},data:()=>({userAgent:""}),methods:{async check(){const{count:t}=(await this.$axios.post("/ip/checkUserAgent",{user:this.user,userAgent:this.userAgent})).data;return t&&0!==t?this.$notify.error({title:"Использлован"}):this.$notify.success({title:"Не успользован"})}}};var m=Object(n.a)(h,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("mdb-modal",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],on:{close:function(e){return t.$emit("close")}}},[o("mdb-modal-header",[t._v("\n    Добавить UserAgent\n  ")]),t._v(" "),o("mdb-modal-body",[o("mdb-input",{attrs:{type:"textarea",label:"userAgent"},model:{value:t.userAgent,callback:function(e){t.userAgent=e},expression:"userAgent"}})],1),t._v(" "),o("mdb-modal-footer",[o("mdb-btn",{attrs:{color:"success"},on:{click:t.check}},[t._v("Добавить")])],1)],1)}),[],!1,(function(t){}),"6d61b4c3","562c5ae2").exports,v={name:"updateIpModal",props:["show","row"],data:()=>({ipString:""}),watch:{row(){this.ipString=this.row.string}},computed:{user(){return this.$store.getters["auth/user"]}},methods:{async add(){let{user:t,ipString:e}=this;const{success:o}=(await this.$axios.post("/ip/update",{user:t,ipString:e,_id:this.row._id})).data;o?(this.$notify.success({title:"Изменено успешно"}),this.$emit("reload"),this.$emit("close"),this.ipString=""):this.$notify.error({title:"Ошибка при узменении"})}}};var _=Object(n.a)(v,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("mdb-modal",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],on:{close:function(e){return t.$emit("close")}}},[o("mdb-modal-header",[t._v("\n    Изменить IP\n  ")]),t._v(" "),o("mdb-modal-body",[o("mdb-input",{attrs:{type:"textarea",label:"Строка для ip"},model:{value:t.ipString,callback:function(e){t.ipString=e},expression:"ipString"}})],1),t._v(" "),o("mdb-modal-footer",[o("mdb-btn",{attrs:{color:"success"},on:{click:t.add}},[t._v("Добавить")])],1)],1)}),[],!1,(function(t){}),"e1a4b8da","571b3de4").exports,w=o(242),f=o.n(w),A={name:"ip",components:{UpdateIpModal:_,CheckUserAgentModal:m,AddUserAgentModal:l,AddIpsModal:d},computed:{user(){return this.$store.getters["auth/user"]},ips(){return this.$store.getters["ip/allIps"]}},data:()=>({showAddModal:!1,addUserAgentModal:!1,updateRow:!1,showCheckUserAgentModal:!1,updateIpModalShow:!1}),async mounted(){await this.$store.dispatch("select/loadAutoSelectBank"),this.setIntervalReload(),await this.reload(),await this.loadAll()},methods:{generateDate(t){let e=new Date(t);return f()(e,"dd.mm.yyyy")},updateRowIp(t){this.updateIpModalShow=!0,this.updateRow=t},showUserAgentModal(t){this.addUserAgentModal=!0,this.updateRow=t},async loadAll(){const{user:t}=this},async reload(){const{user:t}=this;await this.$store.dispatch("ip/loadAll")},async deleteRow(t){const{user:e}=this,{success:o}=(await this.$axios.post("/ip/deleteIp",{user:e,_id:t._id})).data;o?(this.$notify.success({title:"Успешно удалено"}),await this.reload()):this.$notify.error({title:"Ошибка при улалении"})},setIntervalReload(){this.$store.dispatch("table/setInterval"),this.$store.dispatch("profile/setInterval"),this.$store.dispatch("ip/setInterval")}}};var $=Object(n.a)(A,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("mdb-btn",{on:{click:function(e){t.showCheckUserAgentModal=!0}}},[t._v("Проверить userAgent")]),t._ssrNode(" "),o("mdb-table",{attrs:{bordered:"",responsive:""}},[o("mdb-table-head",[o("th",[t._v("#")]),t._v(" "),o("th",[t._v("Добавлен")]),t._v(" "),o("th",[t._v("IP")]),t._v(" "),o("th",[t._v("Строка")]),t._v(" "),o("th",[t._v("Локация")]),t._v(" "),o("th",[t._v("UserAgent")]),t._v(" "),o("th",[t._v("Использован")]),t._v(" "),o("th",[t._v("Брак")]),t._v(" "),o("th",[t._v("Требуется продление")]),t._v(" "),o("th",[t._v("Действия")])]),t._v(" "),o("mdb-table-body",t._l(t.ips,(function(e){return o("tr",[o("td",[t._v(t._s(e._id))]),t._v(" "),o("td",[t._v(t._s(t.generateDate(e.dateAdd)))]),t._v(" "),o("td",[t._v(t._s(e.ip))]),t._v(" "),o("td",[t._v(t._s(e.string))]),t._v(" "),o("td",[t._v(t._s(e.town))]),t._v(" "),o("td",[t._v(t._s(e.userAgent))]),t._v(" "),o("td",[e.used?o("span",[t._v("Да")]):o("span",[t._v("Нет")])]),t._v(" "),o("td",[e.breakage?o("span",[t._v("Да")]):o("span",[t._v("Нет")])]),t._v(" "),o("td",[e.adopted?o("span",[t._v("Нет")]):o("span",[t._v("Да")])]),t._v(" "),o("td",[o("mdb-btn",{on:{click:function(o){return t.showUserAgentModal(e)}}},[t._v("Прикрепить useragent")]),t._v(" "),e.used||e.breakage?t._e():o("mdb-btn",{attrs:{color:"danger"},on:{click:function(o){return t.deleteRow(e)}}},[t._v("Удалить")]),t._v(" "),o("mdb-btn",{on:{click:function(o){return t.updateRowIp(e)}}},[t._v("Изменить")])],1)])})),0)],1),t._ssrNode(" "),o("mdb-btn",{on:{click:function(e){t.showAddModal=!0}}},[t._v("Добавить адреса")]),t._ssrNode(" "),o("add-ips-modal",{attrs:{show:t.showAddModal},on:{reload:t.reload,close:function(e){t.showAddModal=!1}}}),t._ssrNode(" "),o("update-ip-modal",{attrs:{show:t.updateIpModalShow,row:t.updateRow},on:{close:function(e){t.updateIpModalShow=!1}}}),t._ssrNode(" "),o("add-user-agent-modal",{attrs:{show:t.addUserAgentModal,row:t.updateRow},on:{reload:t.reload,close:function(e){t.addUserAgentModal=!1}}}),t._ssrNode(" "),o("check-user-agent-modal",{attrs:{show:t.showCheckUserAgentModal},on:{close:function(e){t.showCheckUserAgentModal=!1}}})],2)}),[],!1,(function(t){}),"208a2d99","4774a811");e.default=$.exports}};